gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE  1


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00001 ;*****************************************************************************************************************
               00002 ;                                       PROGRAMA GERADOR DE SINAIS
               00003 ;                               DESENVOLVIDO POR MARCOS AURELIO DA SILVA AMORIM
               00004 ;                                               VERSAO 1.0
               00005 ;                                               08/09/2010 
               00006 ;*****************************************************************************************************************
               00007 ;                                       ARQUIVOS DE DEFINICOES
               00008 ;*****************************************************************************************************************
               00009 
               00010 include <16f628.inc>                                    ;ARQUIVO PADRAO MICROCHIP PARA 16F628A
               00001         LIST
               00002 ; P16F628.INC  Standard Header File, Version 1.01    Microchip Technology, Inc.
               00261         LIST
               00011 
Warning [205] : Found directive in column 1.
002007 1E50    00012 __config 0x1e50
               00013 ;
               00014 ;       _BOREN_ON               BROWN-OUT RESET
               00015 ;       _CP_ON                  CODE PROTECT
               00016 ;       _DATA_CP_ON             CODE PROTECT MEMORIA EEPROM
               00017 ;       _PWRTE_ON               POWER UP TIMER
               00018 ;       _WDT_OFF                        WATCHDOG TIMER
               00019 ;       _LVP_OFF                        LOW VOLTAGE PROGRAM
               00020 ;       _MCLRE_OFF              MASTER CLEAR NO RA5
               00021 ;       OSCILADOR INTERNO SEM CLOCK
               00022 ;
               00023 ;*****************************************************************************************************************
               00024 ;                                       VARIAVEIS
               00025 ;*****************************************************************************************************************
               00026 
               00027 ;ENDERECOS DAS VARIAVEIS UTILIZADAS PELO SISTEMA
               00028 
  00000020     00029 FLAGS1                          EQU     0X20    ;0X20 USADO COM SINALIZACAO
  00000021     00030 FLAGS2                          EQU     0X21    ;0X21 USADO COM SINALIZACAO
  00000022     00031 DEB_BOTAO0                      EQU     0X22    ;0X22 USADO NO DEBOUNCE0
  00000023     00032 FREQ_BOTAO0                     EQU     0X23    ;0X23 USADO NO FREQ0
  00000024     00033 MUL_BOTAO0                      EQU     0X24    ;0X24 USADO NO FREQ0
  00000025     00034 DEB_BOTAO1                      EQU     0X25    ;0X25 USADO NO DEBOUNCE1
  00000026     00035 FREQ_BOTAO1                     EQU     0X26    ;0X26 USADO NO FREQ1
  00000027     00036 MUL_BOTAO1                      EQU     0X27    ;0X27 USADO NO FREQ1
  00000028     00037 DEB_BOTAO2                      EQU     0X28    ;0X25 USADO NO DEBOUNCE1
  00000029     00038 FREQ_BOTAO2                     EQU     0X29    ;0X26 USADO NO FREQ1
  00000030     00039 MUL_BOTAO2                      EQU     0X30    ;0X27 USADO NO FREQ1
  00000031     00040 DEB_BOTAO3                      EQU     0X31    ;0X25 USADO NO DEBOUNCE1
  00000032     00041 FREQ_BOTAO3                     EQU     0X32    ;0X26 USADO NO FREQ1
  00000033     00042 MUL_BOTAO3                      EQU     0X33    ;0X27 USADO NO FREQ1
               00043 
               00044 ;*****************************************************************************************************************
               00045 ;                                       CONSTANTES
               00046 ;*****************************************************************************************************************
               00047 
               00048 ;BITS DO REGISTRADOR FLAGS
               00049 
  00000000     00050 V_BOTAO0                        EQU     .0    ;VELOCIDADE 0
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE  2


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
  00000000     00051 FIM_BOTAO0              EQU     .0    ;FIM 0
  00000001     00052 V_BOTAO1                        EQU     .1    ;VELOCIDADE 1
  00000001     00053 FIM_BOTAO1              EQU     .1    ;FIM 1
  00000002     00054 V_BOTAO2                        EQU     .2    ;VELOCIDADE 2
  00000002     00055 FIM_BOTAO2              EQU     .2    ;FIM 2
  00000003     00056 V_BOTAO3                        EQU     .3    ;VELOCIDADE 3
  00000003     00057 FIM_BOTAO3              EQU     .3    ;FIM 3
               00058 
               00059 ;CONSTANTES UTILIZADAS NO SISTEMA
               00060 
  000000FA     00061 C_DEBO                          EQU     .250    ;TEMPO DEBO = 250ms
  00000001     00062 C_FREQ_BOTAO0           EQU     .1              ;FREQ LED_BOTAO0 = 1*1/2=0.5ms=1kHz
  00000001     00063 C_MUL_BOTAO0            EQU     .1              ;FREQ LED_BOTAO0
  00000002     00064 C_FREQ_BOTAO1           EQU     .2              ;FREQ LED_BOTAO1 = 2*2/2=2ms=250Hz
  00000002     00065 C_MUL_BOTAO1            EQU     .2              ;FREQ LED_BOTAO1
  00000005     00066 C_FREQ_BOTAO2           EQU     .5              ;FREQ LED_BOTAO2 = 4*5/2=10ms=50Hz
  00000004     00067 C_MUL_BOTAO2            EQU     .4              ;FREQ LED_BOTAO2
  000000FA     00068 C_FREQ_BOTAO3           EQU     .250    ;FREQ LED_BOTAO3 = 40*250/2=5000ms
  00000028     00069 C_MUL_BOTAO3            EQU     .40     ;FREQ LED_BOTAO3
               00070 
               00071 ;*****************************************************************************************************************
               00072 ;                                       FLAGS
               00073 ;*****************************************************************************************************************
               00074 ;REGISTRADOR FLAGS1
               00075 ;
               00076 ;       BIT     |7|6|5|4|3|2|1|0|
               00077 ;                       |X|X|X|X|X|X|X|Y|       VELOCIDADE 0
               00078 ;                       |X|X|X|X|X|X|Y|X|       VELOCIDADE 1
               00079 ;                       |X|X|X|X|X|Y|X|X|       VELOCIDADE 2
               00080 ;                       |X|X|X|X|Y|X|X|X|       VELOCIDADE 3
               00081 ;                       |X|X|X|Y|X|X|X|X|       RESERVADO
               00082 ;                       |X|X|Y|X|X|X|X|X|       RESERVADO
               00083 ;                       |X|Y|X|X|X|X|X|X|       RESERVADO
               00084 ;                       |Y|X|X|X|X|X|X|X|       RESERVADO
               00085 ;
               00086 ;REGISTRADOR FLAGS2
               00087 ;
               00088 ;       BIT     |7|6|5|4|3|2|1|0|
               00089 ;                       |X|X|X|X|X|X|X|Y|       FIM 0
               00090 ;                       |X|X|X|X|X|X|Y|X|       FIM 1
               00091 ;                       |X|X|X|X|X|Y|X|X|       FIM 2
               00092 ;                       |X|X|X|X|Y|X|X|X|       FIM 3
               00093 ;                       |X|X|X|Y|X|X|X|X|       RESERVADO
               00094 ;                       |X|X|Y|X|X|X|X|X|       RESERVADO
               00095 ;                       |X|Y|X|X|X|X|X|X|       RESERVADO
               00096 ;                       |Y|X|X|X|X|X|X|X|       RESERVADO
               00097 ;
               00098 ;*****************************************************************************************************************
               00099 ;                                       ENTRADAS
               00100 ;*****************************************************************************************************************
               00101 ;PINOS QUE SERAO USADOS COMO ENTRADA
               00102 
0000           00103 #DEFINE         BOTAO0          PORTA,0                 ;1-->FECHADO    0-->ABERTO
0000           00104 #DEFINE         BOTAO1          PORTA,1                 ;1-->FECHADO    0-->ABERTO
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE  3


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0000           00105 #DEFINE         BOTAO2          PORTB,2                 ;1-->FECHADO    0-->ABERTO
0000           00106 #DEFINE         BOTAO3          PORTB,3                 ;1-->FECHADO    0-->ABERTO
               00107 
               00108 ;*****************************************************************************************************************
               00109 ;                                       SAIDAS
               00110 ;*****************************************************************************************************************
               00111 ;PINOS QUE SERAO USADOS COMO SAIDA
               00112 
0000           00113 #DEFINE         LED_BOTAO0              PORTB,0                 ;0-->APAGADO    1-->ACESO
0000           00114 #DEFINE         LED_BOTAO1              PORTB,1                 ;0-->APAGADO    1-->ACESO
               00115 
               00116 ;*****************************************************************************************************************
               00117 ;                                       VETOR RESET
               00118 ;*****************************************************************************************************************
               00119 
0000           00120                 ORG             0x00                    ;ENDERECO INICIAL DE PROCESSAMENTO
0000 2805      00121                 GOTO            NOVO        ;DESVIA PARA INICIO
               00122 
               00123 ;*****************************************************************************************************************
               00124 ;AS INTERRUPCOES NAO SERAO UTILIZADAS
               00125 
0004           00126                 ORG             0x04                    ;ENDERECO INICIAL DA INTERRUPCAO
0004 0009      00127                 RETFIE               ;RETORNA DA INTERRUPCAO
               00128 
               00129 ;*****************************************************************************************************************
               00130 ;                                       INICIO
               00131 ;*****************************************************************************************************************
               00132 
0005           00133 NOVO
               00134 
0005 3081      00135         MOVLW           OPTION_REG                ;PRESCALER 1:4 NO TMRO<2:0>
0006 0084      00136         MOVWF           FSR                                                             ;RECEBE DESTINO DO APONTADOR
0007 3081      00137         MOVLW           B'10000001'               ;PULL_UPS DESABILITADOS<7>
0008 0080      00138         MOVWF           INDF                                                            ;RECEBE VALOR A SER COLOCADO NO DESTINO QUE O APONTADOR INDICA
               00139 
0009 300B      00140         MOVLW           INTCON                    ;DEMAIS BITS IRRELEVANTES
000A 0084      00141         MOVWF           FSR
000B 3000      00142         MOVLW           B'00000000'               ;CHAVE GERAL DE INTERRUPCAO DESLIGADA<7>
000C 0080      00143         MOVWF           INDF
000D 3007      00144         MOVLW           B'00000111'               ;DESATIVA COMPARADORES E ABILITA I/O<2:0>
000E 009F      00145         MOVWF           CMCON
               00146 
000F 3085      00147         MOVLW           TRISA
0010 0084      00148         MOVWF           FSR
0011 3003      00149         MOVLW           B'00000011'               ;DEFINE RA0, RA1 COMO ENTRADA E RESTO COMO SAIDA
0012 0080      00150         MOVWF           INDF
               00151 
0013 3086      00152         MOVLW           TRISB
0014 0084      00153         MOVWF           FSR
0015 300C      00154         MOVLW           B'00001100'               ;DEFINE RB2, RB3 COMO ENTRADA E RESTO COMO SAIDA
0016 0080      00155         MOVWF           INDF
               00156 
               00157 ;*****************************************************************************************************************
               00158 ;                                       INICIALIZAÇÃO DAS VARIAVEIS
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE  4


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00159 ;*****************************************************************************************************************
               00160 
0017 0185      00161     CLRF    PORTA                       ;LIMPA PORTA
0018 0186      00162     CLRF    PORTB                       ;LIMPA PORTB
0019 30FA      00163     MOVLW       C_DEBO                          ;INICIALIZA VAR_DEB_BOTAO0
001A 00A2      00164     MOVWF       DEB_BOTAO0
001B 3001      00165     MOVLW       C_FREQ_BOTAO0        ;INICIALIZA VAR_FREQ_BOTAO0
001C 00A3      00166     MOVWF       FREQ_BOTAO0
001D 3001      00167     MOVLW       C_MUL_BOTAO0         ;INICIALIZA VAR_MUL_BOTAO0
001E 00A4      00168     MOVWF       MUL_BOTAO0
001F 30FA      00169     MOVLW       C_DEBO                          ;INICIALIZA VAR_DEB_BOTAO1
0020 00A5      00170     MOVWF       DEB_BOTAO1
0021 3002      00171     MOVLW       C_FREQ_BOTAO1        ;INICIALIZA VAR_FREQ_BOTAO1
0022 00A6      00172     MOVWF       FREQ_BOTAO1
0023 3002      00173     MOVLW       C_MUL_BOTAO1         ;INICIALIZA VAR_MUL_BOTAO1
0024 00A7      00174     MOVWF       MUL_BOTAO1
0025 30FA      00175     MOVLW       C_DEBO                          ;INICIALIZA VAR_DEB_BOTAO1
0026 00A8      00176     MOVWF       DEB_BOTAO2
0027 3005      00177     MOVLW       C_FREQ_BOTAO2        ;INICIALIZA VAR_FREQ_BOTAO1
0028 00A9      00178     MOVWF       FREQ_BOTAO2
0029 3004      00179     MOVLW       C_MUL_BOTAO2         ;INICIALIZA VAR_MUL_BOTAO1
002A 00B0      00180     MOVWF       MUL_BOTAO2
002B 30FA      00181     MOVLW       C_DEBO                          ;INICIALIZA VAR_DEB_BOTAO1
002C 00B1      00182     MOVWF       DEB_BOTAO3
002D 30FA      00183     MOVLW       C_FREQ_BOTAO3        ;INICIALIZA VAR_FREQ_BOTAO1
002E 00B2      00184     MOVWF       FREQ_BOTAO3
002F 3028      00185     MOVLW       C_MUL_BOTAO3         ;INICIALIZA VAR_MUL_BOTAO1
0030 00B3      00186     MOVWF       MUL_BOTAO3
0031 3000      00187     MOVLW   B'00000000'          ;INICIALIZA FLAGS1
0032 00A0      00188     MOVWF   FLAGS1
0033 3000      00189     MOVLW   B'00000000'          ;INICIALIZA FLAGS2
0034 00A1      00190     MOVWF   FLAGS2
               00191                 
               00192 ;*****************************************************************************************************************
               00193 ;                                       ROTINA-PRINCIPAL
               00194 ;*****************************************************************************************************************
               00195                 
0035           00196 MAIN
0035 2040      00197     CALL      TESTAR_BOTAO0            ;FUNCAO BOTAO0
0036 2049      00198     CALL      DEBOUNCE_BOTAO0          ;FUNCAO DEB_BOTAO0
0037 2063      00199     CALL      TESTAR_BOTAO1            ;FUNCAO BOTAO1
0038 206C      00200     CALL      DEBOUNCE_BOTAO1          ;FUNCAO DEB_BOTAO1
0039 2086      00201     CALL      TESTAR_BOTAO2            ;FUNCAO BOTAO1
003A 208F      00202     CALL      DEBOUNCE_BOTAO2          ;FUNCAO DEB_BOTAO1
003B 20A9      00203     CALL      TESTAR_BOTAO3            ;FUNCAO BOTAO1
003C 20B2      00204     CALL      DEBOUNCE_BOTAO3          ;FUNCAO DEB_BOTAO1
003D 20BD      00205     CALL      PISCA_BOTAO                               ;FUNCAO PISCA
003E 20D0      00206     CALL      TEMPO_mSEG               ;FUNCAO DE TEMPO
003F 2835      00207     GOTO      MAIN
               00208 
               00209 ;*****************************************************************************************************************
               00210 ;                                       SUB-ROTINAS
               00211 ;*****************************************************************************************************************
               00212 
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE  5


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0040           00213 TESTAR_BOTAO0
0040 1C05      00214     BTFSS               BOTAO0                  ;ENT_BOTAO0=1?
0041 2844      00215     GOTO                BOTAO0_0             ;NAO, CHAMA FUNCAO BOTAO0 DESATIVADO
0042 2847      00216     GOTO                BOTAO0_1             ;SIM, CHAMA FUNCAO BOTAO0 ATIVADO
0043 0008      00217     RETURN
               00218 
0044           00219 BOTAO0_0
0044 1020      00220     BCF                 FLAGS1,V_BOTAO0            ;FLAGS1,V_BOTAO0=0
0045 1021      00221     BCF                 FLAGS2,FIM_BOTAO0          ;FLAGS2,FIM_BOTAO0=0
0046 0008      00222     RETURN
               00223 
0047           00224 BOTAO0_1
0047 1420      00225     BSF                 FLAGS1,V_BOTAO0            ;FLAGS1,V_BOTAO0=1
0048 0008      00226     RETURN
               00227 
               00228 ;*****************************************************************************************************************
               00229 
0049           00230 DEBOUNCE_BOTAO0
0049 1C20      00231     BTFSS               FLAGS1,V_BOTAO0          ;FLAGS1,V_BOTAO0=1?
004A 284E      00232     GOTO                        INI_BOTAO0              ;NAO, ENTAO ZERA DEB_BOTAO0
               00233                                                                                                         ;SIM, ENTAO CONTINUA
004B 0BA2      00234     DECFSZ              DEB_BOTAO0,F           ;DECREMENTA VAR_DEB_BOTAO0, VAR_DEB_BOTAO0=0?
004C 0008      00235     RETURN                                  ;NAO, ENTAO SAI DA FUNCAO
               00236                                                                                                         ;SIM, ENTAO CONTINUA
004D 1421      00237     BSF                 FLAGS2,FIM_BOTAO0        ;FLAGS2,FIM_BOTAO0=1
               00238 
004E           00239 INI_BOTAO0
004E 30FA      00240     MOVLW               C_DEBO                   ;INICIALIZA VAR_DEB_BOTAO0
004F 00A2      00241     MOVWF               DEB_BOTAO0
0050 0008      00242     RETURN                              ;SAI DA FUNCAO
               00243 
               00244 ;*****************************************************************************************************************
               00245 
0051           00246 F_BOTAO0
0051 0BA3      00247     DECFSZ              FREQ_BOTAO0,F           ;DECREMENTA VAR_FREQ_BOTAO0, VAR_FREQ_BOTAO0=0?
0052 0008      00248     RETURN                                  ;NAO, ENTAO SAI DA FUNCAO
               00249                                                                                                         ;SIM, ENTAO CONTINUA
0053 3001      00250     MOVLW               C_FREQ_BOTAO0            ;INICIALIZA VAR_FREQ_BOTAO0
0054 00A3      00251     MOVWF               FREQ_BOTAO0
0055 0BA4      00252     DECFSZ              MUL_BOTAO0,F           ;DECREMENTA VAR_MUL_BOTAO0, VAR_MUL_BOTAO0=0?
0056 0008      00253     RETURN                                  ;NAO, ENTAO SAI DA FUNCAO
               00254                                                                                                         ;SIM, ENTAO CONTINUA
0057 3001      00255     MOVLW               C_MUL_BOTAO0            ;INICIALIZA VAR_MUL_BOTAO0
0058 00A4      00256     MOVWF               MUL_BOTAO0
0059 1C06      00257     BTFSS               LED_BOTAO0                      ;SAI_LED_BOTAO=1?
005A 285D      00258     GOTO                        LED_BOTAO0_0                  ;NAO, CHAMA FUNCAO ATIVA LED_BOTAO0
005B 2860      00259     GOTO                        LED_BOTAO0_1                  ;SIM, CHAMA FUNCAO DESATIVA LED_BOTAO0
005C 0008      00260     RETURN
               00261 
005D           00262 LED_BOTAO0_0
005D 1406      00263     BSF                 LED_BOTAO0               ;LIGA LED
005E 1486      00264     BSF                 LED_BOTAO1               ;LIGA LED
005F 0008      00265     RETURN                              ;SAI DA FUNCAO
               00266 
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE  6


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
0060           00267 LED_BOTAO0_1
0060 1006      00268     BCF                 LED_BOTAO0               ;DESLIGA LED
0061 1086      00269     BCF                 LED_BOTAO1               ;DESLIGA LED
0062 0008      00270     RETURN                              ;SAI DA FUNCAO
               00271 
               00272 ;*****************************************************************************************************************
               00273 ;*****************************************************************************************************************
               00274 
0063           00275 TESTAR_BOTAO1
0063 1C85      00276     BTFSS               BOTAO1                  ;ENT_BOTAO1=1?
0064 2867      00277     GOTO                BOTAO1_0             ;NAO, CHAMA FUNCAO BOTAO1 DESATIVADO
0065 286A      00278     GOTO                BOTAO1_1             ;SIM, CHAMA FUNCAO BOTAO1 ATIVADO
0066 0008      00279     RETURN
               00280 
0067           00281 BOTAO1_0
0067 10A0      00282     BCF                 FLAGS1,V_BOTAO1            ;FLAGS1,V_BOTAO1=0
0068 10A1      00283     BCF                 FLAGS2,FIM_BOTAO1          ;FLAGS2,FIM_BOTAO1=0
0069 0008      00284     RETURN
               00285 
006A           00286 BOTAO1_1
006A 14A0      00287     BSF                 FLAGS1,V_BOTAO1            ;FLAGS1,V_BOTAO1=1
006B 0008      00288     RETURN
               00289 
               00290 ;*****************************************************************************************************************
               00291 
006C           00292 DEBOUNCE_BOTAO1
006C 1CA0      00293     BTFSS               FLAGS1,V_BOTAO1          ;FLAGS1,V_BOTAO1=1?
006D 2871      00294     GOTO                        INI_BOTAO1              ;NAO, ENTAO ZERA DEB_BOTAO1
               00295                                                                                                         ;SIM, ENTAO CONTINUA
006E 0BA5      00296     DECFSZ              DEB_BOTAO1,F           ;DECREMENTA VAR_DEB_BOTAO1, VAR_DEB_BOTAO1=0?
006F 0008      00297     RETURN                                  ;NAO, ENTAO SAI DA FUNCAO
               00298                                                                                                         ;SIM, ENTAO CONTINUA
0070 14A1      00299     BSF                 FLAGS2,FIM_BOTAO1        ;FLAGS2,FIM_BOTAO1=1
               00300 
0071           00301 INI_BOTAO1
0071 30FA      00302     MOVLW               C_DEBO                   ;INICIALIZA VAR_DEB_BOTAO1
0072 00A5      00303     MOVWF               DEB_BOTAO1
0073 0008      00304     RETURN                              ;SAI DA FUNCAO
               00305 
               00306 ;*****************************************************************************************************************
               00307 
0074           00308 F_BOTAO1
0074 0BA6      00309     DECFSZ              FREQ_BOTAO1,F           ;DECREMENTA VAR_FREQ_BOTAO1, VAR_FREQ_BOTAO1=0?
0075 0008      00310     RETURN                                  ;NAO, ENTAO SAI DA FUNCAO
               00311                                                                                                         ;SIM, ENTAO CONTINUA
0076 3002      00312     MOVLW               C_FREQ_BOTAO1            ;INICIALIZA VAR_FREQ_BOTAO1
0077 00A6      00313     MOVWF               FREQ_BOTAO1
0078 0BA7      00314     DECFSZ              MUL_BOTAO1,F           ;DECREMENTA VAR_MUL_BOTAO1, VAR_MUL_BOTAO1=0?
0079 0008      00315     RETURN                                  ;NAO, ENTAO SAI DA FUNCAO
               00316                                                                                                         ;SIM, ENTAO CONTINUA
007A 3002      00317     MOVLW               C_MUL_BOTAO1            ;INICIALIZA VAR_MUL_BOTAO1
007B 00A7      00318     MOVWF               MUL_BOTAO1
007C 1C06      00319     BTFSS               LED_BOTAO0                      ;SAI_LED_BOTAO=1?
007D 2880      00320     GOTO                        LED_BOTAO1_0                  ;NAO, CHAMA FUNCAO ATIVA LED_BOTAO1
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE  7


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
007E 2883      00321     GOTO                        LED_BOTAO1_1                  ;SIM, CHAMA FUNCAO DESATIVA LED_BOTAO1
007F 0008      00322     RETURN
               00323 
0080           00324 LED_BOTAO1_0
0080 1406      00325     BSF                 LED_BOTAO0               ;LIGA LED
0081 1486      00326     BSF                 LED_BOTAO1               ;LIGA LED
0082 0008      00327     RETURN                              ;SAI DA FUNCAO
               00328 
0083           00329 LED_BOTAO1_1
0083 1006      00330     BCF                 LED_BOTAO0               ;DESLIGA LED
0084 1086      00331     BCF                 LED_BOTAO1               ;DESLIGA LED
0085 0008      00332     RETURN                              ;SAI DA FUNCAO
               00333 
               00334 ;*****************************************************************************************************************
               00335 ;*****************************************************************************************************************
               00336 
0086           00337 TESTAR_BOTAO2
0086 1D06      00338     BTFSS               BOTAO2                  ;ENT_BOTAO2=1?
0087 288A      00339     GOTO                BOTAO2_0             ;NAO, CHAMA FUNCAO BOTAO2 DESATIVADO
0088 288D      00340     GOTO                BOTAO2_1             ;SIM, CHAMA FUNCAO BOTAO2 ATIVADO
0089 0008      00341     RETURN
               00342 
008A           00343 BOTAO2_0
008A 1120      00344     BCF                 FLAGS1,V_BOTAO2            ;FLAGS1,V_BOTAO2=0
008B 1121      00345     BCF                 FLAGS2,FIM_BOTAO2          ;FLAGS2,FIM_BOTAO2=0
008C 0008      00346     RETURN
               00347 
008D           00348 BOTAO2_1
008D 1520      00349     BSF                 FLAGS1,V_BOTAO2            ;FLAGS1,V_BOTAO2=1
008E 0008      00350     RETURN
               00351 
               00352 ;*****************************************************************************************************************
               00353 
008F           00354 DEBOUNCE_BOTAO2
008F 1D20      00355     BTFSS               FLAGS1,V_BOTAO2          ;FLAGS1,V_BOTAO2=1?
0090 2894      00356     GOTO                        INI_BOTAO2              ;NAO, ENTAO ZERA DEB_BOTAO2
               00357                                                                                                         ;SIM, ENTAO CONTINUA
0091 0BA8      00358     DECFSZ              DEB_BOTAO2,F           ;DECREMENTA VAR_DEB_BOTAO2, VAR_DEB_BOTAO2=0?
0092 0008      00359     RETURN                                  ;NAO, ENTAO SAI DA FUNCAO
               00360                                                                                                         ;SIM, ENTAO CONTINUA
0093 1521      00361     BSF                 FLAGS2,FIM_BOTAO2        ;FLAGS2,FIM_BOTAO2=1
               00362 
0094           00363 INI_BOTAO2
0094 30FA      00364     MOVLW               C_DEBO                   ;INICIALIZA VAR_DEB_BOTAO2
0095 00A8      00365     MOVWF               DEB_BOTAO2
0096 0008      00366     RETURN                              ;SAI DA FUNCAO
               00367 
               00368 ;*****************************************************************************************************************
               00369 
0097           00370 F_BOTAO2
0097 0BA9      00371     DECFSZ              FREQ_BOTAO2,F           ;DECREMENTA VAR_FREQ_BOTAO2, VAR_FREQ_BOTAO2=0?
0098 0008      00372     RETURN                                  ;NAO, ENTAO SAI DA FUNCAO
               00373                                                                                                         ;SIM, ENTAO CONTINUA
0099 3005      00374     MOVLW               C_FREQ_BOTAO2            ;INICIALIZA VAR_FREQ_BOTAO2
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE  8


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
009A 00A9      00375     MOVWF               FREQ_BOTAO2
009B 0BB0      00376     DECFSZ              MUL_BOTAO2,F           ;DECREMENTA VAR_MUL_BOTAO2, VAR_MUL_BOTAO2=0?
009C 0008      00377     RETURN                                  ;NAO, ENTAO SAI DA FUNCAO
               00378                                                                                                         ;SIM, ENTAO CONTINUA
009D 3004      00379     MOVLW               C_MUL_BOTAO2            ;INICIALIZA VAR_MUL_BOTAO2
009E 00B0      00380     MOVWF               MUL_BOTAO2
009F 1C06      00381     BTFSS               LED_BOTAO0                      ;SAI_LED_BOTAO=1?
00A0 28A3      00382     GOTO                        LED_BOTAO2_0                  ;NAO, CHAMA FUNCAO ATIVA LED_BOTAO2
00A1 28A6      00383     GOTO                        LED_BOTAO2_1                  ;SIM, CHAMA FUNCAO DESATIVA LED_BOTAO2
00A2 0008      00384     RETURN
               00385 
00A3           00386 LED_BOTAO2_0
00A3 1406      00387     BSF                 LED_BOTAO0               ;LIGA LED
00A4 1486      00388     BSF                 LED_BOTAO1               ;LIGA LED
00A5 0008      00389     RETURN                              ;SAI DA FUNCAO
               00390 
00A6           00391 LED_BOTAO2_1
00A6 1006      00392     BCF                 LED_BOTAO0               ;DESLIGA LED
00A7 1086      00393     BCF                 LED_BOTAO1               ;DESLIGA LED
00A8 0008      00394     RETURN                              ;SAI DA FUNCAO
               00395 
               00396 ;*****************************************************************************************************************
               00397 ;*****************************************************************************************************************
               00398 
00A9           00399 TESTAR_BOTAO3
00A9 1D86      00400     BTFSS               BOTAO3                  ;ENT_BOTAO3=1?
00AA 28AD      00401     GOTO                BOTAO3_0             ;NAO, CHAMA FUNCAO BOTAO3 DESATIVADO
00AB 28B0      00402     GOTO                BOTAO3_1             ;SIM, CHAMA FUNCAO BOTAO3 ATIVADO
00AC 0008      00403     RETURN
               00404 
00AD           00405 BOTAO3_0
00AD 11A0      00406     BCF                 FLAGS1,V_BOTAO3            ;FLAGS1,V_BOTAO3=0
00AE 11A1      00407     BCF                 FLAGS2,FIM_BOTAO3          ;FLAGS2,FIM_BOTAO3=0
00AF 0008      00408     RETURN
               00409 
00B0           00410 BOTAO3_1
00B0 15A0      00411     BSF                 FLAGS1,V_BOTAO3            ;FLAGS1,V_BOTAO3=1
00B1 0008      00412     RETURN
               00413 
               00414 ;*****************************************************************************************************************
               00415 
00B2           00416 DEBOUNCE_BOTAO3
00B2 1DA0      00417     BTFSS               FLAGS1,V_BOTAO3          ;FLAGS1,V_BOTAO3=1?
00B3 28B7      00418     GOTO                        INI_BOTAO3              ;NAO, ENTAO ZERA DEB_BOTAO3
               00419                                                                                                         ;SIM, ENTAO CONTINUA
00B4 0BB1      00420     DECFSZ              DEB_BOTAO3,F           ;DECREMENTA VAR_DEB_BOTAO3, VAR_DEB_BOTAO3=0?
00B5 0008      00421     RETURN                                  ;NAO, ENTAO SAI DA FUNCAO
               00422                                                                                                         ;SIM, ENTAO CONTINUA
00B6 15A1      00423     BSF                 FLAGS2,FIM_BOTAO3        ;FLAGS2,FIM_BOTAO3=1
               00424 
00B7           00425 INI_BOTAO3
00B7 30FA      00426     MOVLW               C_DEBO                   ;INICIALIZA VAR_DEB_BOTAO3
00B8 00B1      00427     MOVWF               DEB_BOTAO3
00B9 0008      00428     RETURN                              ;SAI DA FUNCAO
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE  9


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
               00429 
               00430 ;*****************************************************************************************************************
               00431 
00BA           00432 F_BOTAO3
00BA 1406      00433     BSF                 LED_BOTAO0               ;LIGA LED
00BB 1486      00434     BSF                 LED_BOTAO1               ;LIGA LED
00BC 0008      00435     RETURN                              ;SAI DA FUNCAO
               00436 
               00437 ;*****************************************************************************************************************
               00438 ;*****************************************************************************************************************
               00439 
00BD           00440 PISCA_BOTAO
00BD 1821      00441    BTFSC                FLAGS2,FIM_BOTAO0        ;FLAGS2,FIM_BOTAO0=0?
00BE 28C8      00442    GOTO                 PRE_F_BOTAO0                       ;NAO, ENTAO VAI PARA PRE_F_BOTAO0
               00443                                                                                                         ;SIM, ENTAO CONTINUA
00BF 18A1      00444    BTFSC                FLAGS2,FIM_BOTAO1        ;FLAGS2,FIM_BOTAO1=0?
00C0 28CA      00445    GOTO                 PRE_F_BOTAO1                       ;NAO, ENTAO VAI PARA PRE_F_BOTAO1
               00446                                                                                                         ;SIM, ENTAO CONTINUA
00C1 1921      00447    BTFSC                FLAGS2,FIM_BOTAO2        ;FLAGS2,FIM_BOTAO1=0?
00C2 28CC      00448    GOTO                 PRE_F_BOTAO2                       ;NAO, ENTAO VAI PARA PRE_F_BOTAO1
               00449                                                                                                         ;SIM, ENTAO CONTINUA
00C3 19A1      00450    BTFSC                FLAGS2,FIM_BOTAO3        ;FLAGS2,FIM_BOTAO1=0?
00C4 28CE      00451    GOTO                 PRE_F_BOTAO3                       ;NAO, ENTAO VAI PARA PRE_F_BOTAO1
               00452                                                                                                         ;SIM, ENTAO CONTINUA
00C5 1006      00453    BCF                  LED_BOTAO0               ;DESLIGA LED
00C6 1086      00454    BCF                  LED_BOTAO1               ;DESLIGA LED
00C7 0008      00455    RETURN                              ;SAI DA FUNCAO
               00456 
00C8           00457 PRE_F_BOTAO0
00C8 2051      00458         CALL                    F_BOTAO0
00C9 0008      00459    RETURN                              ;SAI DA FUNCAO
               00460 
00CA           00461 PRE_F_BOTAO1
00CA 2074      00462         CALL                    F_BOTAO1
00CB 0008      00463    RETURN                              ;SAI DA FUNCAO
               00464 
00CC           00465 PRE_F_BOTAO2
00CC 2097      00466         CALL                    F_BOTAO2
00CD 0008      00467    RETURN                              ;SAI DA FUNCAO
               00468 
00CE           00469 PRE_F_BOTAO3
00CE 20BA      00470         CALL                    F_BOTAO3
00CF 0008      00471    RETURN                              ;SAI DA FUNCAO
               00472 
               00473 ;*****************************************************************************************************************
               00474 
00D0           00475 TEMPO_mSEG
               00476                                                                                                 ;SE PRESCALE 1:4 TEMPO=4*125=0.5ms
               00477                                                                                                 ;SE PRESCALE 1:8 TEMPO=8*125=1ms
               00478                                                                                                 ;SE PRESCALE 1:16 TEMPO=16*125=2ms
               00479                                                                                                 ;SE PRESCALE 1:32 TEMPO=32*125=4ms
00D0 3083      00480         MOVLW           .131                    ;INICIALIZA REG_TMR0 COM 131
00D1 0081      00481         MOVWF           TMR0
               00482 
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE 10


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
00D2 1D0B      00483         BTFSS           INTCON,2                ;REG_INTCON,2=1 INDICA ESTOURO?
00D3 28D2      00484         GOTO            $-1                    ;NAO, ENTAO VOLTA UMA LINHA
               00485                                                                                                 ;SIM, ENTAO CONTINUA
00D4 110B      00486         BCF             INTCON,2                ;ZERA INTCON,2
00D5 3083      00487         MOVLW           .131                    ;INICIALIZA TMR0 COM 131
00D6 0081      00488         MOVWF           TMR0
00D7 0008      00489         RETURN                           ;SAI DA FUNCAO
               00490 
               00491 ;*****************************************************************************************************************
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE 11


SYMBOL TABLE
  LABEL                             VALUE 

ADEN                              00000003
BOTAO0_0                          00000044
BOTAO0_1                          00000047
BOTAO1_0                          00000067
BOTAO1_1                          0000006A
BOTAO2_0                          0000008A
BOTAO2_1                          0000008D
BOTAO3_0                          000000AD
BOTAO3_1                          000000B0
BRGH                              00000002
C                                 00000000
C1INV                             00000004
C1OUT                             00000006
C2INV                             00000005
C2OUT                             00000007
CCP1CON                           00000017
CCP1IE                            00000002
CCP1IF                            00000002
CCP1M0                            00000000
CCP1M1                            00000001
CCP1M2                            00000002
CCP1M3                            00000003
CCP1X                             00000005
CCP1Y                             00000004
CCPR1H                            00000016
CCPR1L                            00000015
CIS                               00000003
CM0                               00000000
CM1                               00000001
CM2                               00000002
CMCON                             0000001F
CMIE                              00000006
CMIF                              00000006
CREN                              00000004
CSRC                              00000007
C_DEBO                            000000FA
C_FREQ_BOTAO0                     00000001
C_FREQ_BOTAO1                     00000002
C_FREQ_BOTAO2                     00000005
C_FREQ_BOTAO3                     000000FA
C_MUL_BOTAO0                      00000001
C_MUL_BOTAO1                      00000002
C_MUL_BOTAO2                      00000004
C_MUL_BOTAO3                      00000028
DC                                00000001
DEBOUNCE_BOTAO0                   00000049
DEBOUNCE_BOTAO1                   0000006C
DEBOUNCE_BOTAO2                   0000008F
DEBOUNCE_BOTAO3                   000000B2
DEB_BOTAO0                        00000022
DEB_BOTAO1                        00000025
DEB_BOTAO2                        00000028
DEB_BOTAO3                        00000031
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE 12


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
EEADR                             0000009B
EECON1                            0000009C
EECON2                            0000009D
EEDATA                            0000009A
EEIE                              00000007
EEIF                              00000007
F                                 00000001
FERR                              00000002
FIM_BOTAO0                        00000000
FIM_BOTAO1                        00000001
FIM_BOTAO2                        00000002
FIM_BOTAO3                        00000003
FLAGS1                            00000020
FLAGS2                            00000021
FREQ_BOTAO0                       00000023
FREQ_BOTAO1                       00000026
FREQ_BOTAO2                       00000029
FREQ_BOTAO3                       00000032
FSR                               00000004
F_BOTAO0                          00000051
F_BOTAO1                          00000074
F_BOTAO2                          00000097
F_BOTAO3                          000000BA
GIE                               00000007
INDF                              00000000
INI_BOTAO0                        0000004E
INI_BOTAO1                        00000071
INI_BOTAO2                        00000094
INI_BOTAO3                        000000B7
INTCON                            0000000B
INTE                              00000004
INTEDG                            00000006
INTF                              00000001
IRP                               00000007
LED_BOTAO0_0                      0000005D
LED_BOTAO0_1                      00000060
LED_BOTAO1_0                      00000080
LED_BOTAO1_1                      00000083
LED_BOTAO2_0                      000000A3
LED_BOTAO2_1                      000000A6
MAIN                              00000035
MUL_BOTAO0                        00000024
MUL_BOTAO1                        00000027
MUL_BOTAO2                        00000030
MUL_BOTAO3                        00000033
NOT_BO                            00000000
NOT_BOD                           00000000
NOT_BOR                           00000000
NOT_PD                            00000003
NOT_POR                           00000001
NOT_RBPU                          00000007
NOT_T1SYNC                        00000002
NOT_TO                            00000004
NOVO                              00000005
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE 13


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
OERR                              00000001
OPTION_REG                        00000081
OSCF                              00000003
PCL                               00000002
PCLATH                            0000000A
PCON                              0000008E
PEIE                              00000006
PIE1                              0000008C
PIR1                              0000000C
PISCA_BOTAO                       000000BD
PORTA                             00000005
PORTB                             00000006
PR2                               00000092
PRE_F_BOTAO0                      000000C8
PRE_F_BOTAO1                      000000CA
PRE_F_BOTAO2                      000000CC
PRE_F_BOTAO3                      000000CE
PS0                               00000000
PS1                               00000001
PS2                               00000002
PSA                               00000003
RBIE                              00000003
RBIF                              00000000
RCIE                              00000005
RCIF                              00000005
RCREG                             0000001A
RCSTA                             00000018
RD                                00000000
RP0                               00000005
RP1                               00000006
RX9                               00000006
RX9D                              00000000
SPBRG                             00000099
SPEN                              00000007
SREN                              00000005
STATUS                            00000003
SYNC                              00000004
T0CS                              00000005
T0IE                              00000005
T0IF                              00000002
T0SE                              00000004
T1CKPS0                           00000004
T1CKPS1                           00000005
T1CON                             00000010
T1OSCEN                           00000003
T2CKPS0                           00000000
T2CKPS1                           00000001
T2CON                             00000012
TEMPO_mSEG                        000000D0
TESTAR_BOTAO0                     00000040
TESTAR_BOTAO1                     00000063
TESTAR_BOTAO2                     00000086
TESTAR_BOTAO3                     000000A9
TMR0                              00000001
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE 14


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
TMR1CS                            00000001
TMR1H                             0000000F
TMR1IE                            00000000
TMR1IF                            00000000
TMR1L                             0000000E
TMR1ON                            00000000
TMR2                              00000011
TMR2IE                            00000001
TMR2IF                            00000001
TMR2ON                            00000002
TOUTPS0                           00000003
TOUTPS1                           00000004
TOUTPS2                           00000005
TOUTPS3                           00000006
TRISA                             00000085
TRISB                             00000086
TRMT                              00000001
TX9                               00000006
TX9D                              00000000
TXEN                              00000005
TXIE                              00000004
TXIF                              00000004
TXREG                             00000019
TXSTA                             00000098
VR0                               00000000
VR1                               00000001
VR2                               00000002
VR3                               00000003
VRCON                             0000009F
VREN                              00000007
VROE                              00000006
VRR                               00000005
V_BOTAO0                          00000000
V_BOTAO1                          00000001
V_BOTAO2                          00000002
V_BOTAO3                          00000003
W                                 00000000
WR                                00000001
WREN                              00000002
WRERR                             00000003
Z                                 00000002
_BODEN_OFF                        00003FBF
_BODEN_ON                         00003FFF
_CP_50                            00002BFF
_CP_75                            000017FF
_CP_ALL                           000003FF
_CP_OFF                           00003FFF
_DATA_CP_OFF                      00003FFF
_DATA_CP_ON                       00003EFF
_ER_OSC_CLKOUT                    00003FFF
_ER_OSC_NOCLKOUT                  00003FFE
_EXTCLK_OSC                       00003FEF
_HS_OSC                           00003FEE
_INTRC_OSC_CLKOUT                 00003FFD
gpasm-0.13.6 beta               gerasinais.asm9-13-2010  21:45:37          PAGE 15


LOC  OBJECT CODE     LINE SOURCE TEXT
  VALUE
 
_INTRC_OSC_NOCLKOUT               00003FFC
_LP_OSC                           00003FEC
_LVP_OFF                          00003F7F
_LVP_ON                           00003FFF
_MCLRE_OFF                        00003FDF
_MCLRE_ON                         00003FFF
_PWRTE_OFF                        00003FFF
_PWRTE_ON                         00003FF7
_WDT_OFF                          00003FFB
_WDT_ON                           00003FFF
_XT_OSC                           00003FED
__16F628                          00000001
BOTAO0                            PORTA,0
BOTAO1                            PORTA,1
BOTAO2                            PORTB,2
BOTAO3                            PORTB,3
LED_BOTAO0                        PORTB,0
LED_BOTAO1                        PORTB,1


MEMORY USAGE MAP ('X' = Used,  '-' = Unused)

00000000 : X---XXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00000040 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
00000080 : XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX
000000c0 : XXXXXXXXXXXXXXXX XXXXXXXX-------- ---------------- ----------------
00002000 : -------X-------- ---------------- ---------------- ----------------

All other memory blocks unused.

Program Memory Words Used: 214


Errors   :       0
Warnings :       1 reported,       0 suppressed
Messages :       0 reported,       0 suppressed

